(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{4219:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ve}});var n=r(5666),i=r.n(n),a=r(5893),o=r(7294),c=r(9669),l=r.n(c);function s(e,t){var r=void 0===t?300:t;return"https://commons.wikimedia.org/w/index.php?title=Special:Redirect/file/".concat(encodeURIComponent(e),"&width=").concat(r)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){i=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){for(var r=t.map((function(e){return e.year})),n=void 0,i=0,a=[[-1e5,1400],[1400,1850],[1850,1930],[1930,2020]],o=f(a[Math.floor(Math.random()*a.length)],2),c=o[0],l=o[1],s=Math.random()>.5;void 0===n;){if((i+=1)>1e3)throw new Error("Couldn't find item after ".concat(i," iterations"));var d=Math.floor(Math.random()*e.length),p=e[d];s&&p.instance_of.includes("human")||(p.year<c||p.year>l||r.includes(p.year)||(e.splice(d,1),n=u({},p)))}return n}function y(e,t,r){var n=p(e).concat([t]).sort((function(e,t){return e.year-t.year})).findIndex((function(e){return e.id===t.id}));return r!==n?{correct:!1,delta:n-r}:{correct:!0,delta:0}}function b(e){var t=new Image;return t.src=s(e),t}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){h(e,t,r[t])}))}return e}async function g(e){var t=m(e,[]),r=m(e,[]);return{badlyPlaced:null,deck:e,imageCache:[b(t.image),b(r.image)],lives:1,next:t,nextButOne:r,played:[v({},m(e,[]),{played:{correct:!0}})]}}var _=r(5948),x=r(1e3);function w(e,t,r){requestAnimationFrame((function(){var n=document.getElementById("bottom");if(null===n)throw new Error("Can't find #bottom");var i=t.shift(),a=r.shift();void 0===i||void 0===a?e.drop():(n.scrollLeft=a,e.move({x:i,y:0}),w(e,t,r))}))}async function j(e,t){var r;if(null!==e.badlyPlaced&&null!==e.badlyPlaced.index&&!1!==e.badlyPlaced.rendered){var n=null===(r=t.tryGetLock)||void 0===r?void 0:r.call(t,e.played[e.badlyPlaced.index].id);if(n){var i=document.querySelector("[data-rbd-draggable-id='".concat(e.played[e.badlyPlaced.index].id,"']")),a=document.querySelector("[data-rbd-draggable-id='".concat(e.played[e.badlyPlaced.index+e.badlyPlaced.delta].id,"']")),o=document.getElementById("bottom");if(null===i||null===a||null===o)throw new Error("Can't find element");var c=o.scrollLeft+o.clientWidth/4,l=o.scrollLeft+o.clientWidth/4*3-i.clientWidth,s=0;(a.offsetLeft<c||a.offsetLeft>l)&&(s=a.offsetLeft<c?a.offsetLeft-c:a.offsetLeft-l,o.scrollLeft+s<0?s=-o.scrollLeft:o.scrollLeft+s>o.scrollWidth-o.clientWidth&&(s=o.scrollWidth-o.clientWidth-o.scrollLeft));for(var d=a.offsetLeft-i.offsetLeft-s,u=n.fluidLift({x:0,y:0}),f=[],p=[],m=30+5*Math.abs(e.badlyPlaced.delta),y=0;y<m;y++)f.push(x.easeOutCirc(y,0,d,m)),p.push(x.easeOutCirc(y,o.scrollLeft,o.scrollLeft+s,m));w(u,f,p)}}}var P=r(4184),O=r.n(P),k=r(7863),N=r(337),S=r.n(N);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I,A,E={P575:"discovered",P7589:"date of assent",P577:"published",P1191:"first performed",P1619:"officially opened",P571:"created",P1249:"earliest record",P576:"ended",P8556:"became extinct",P6949:"announced",P1319:"earliest",P569:"born",P570:"died",P582:"ended",P580:"started",P7125:"latest one",P7124:"first one"};function L(e){return e.charAt(0).toUpperCase()+e.slice(1)}function D(e){var t=e.draggable,r=e.flippedId,n=e.index,i=e.item,c=e.setFlippedId,l=i.id===r,d=(0,k.useSpring)({opacity:l?1:0,transform:"perspective(600px) rotateY(".concat(l?180:0,"deg)"),config:{mass:5,tension:750,friction:100}}),u=o.useMemo((function(){var e=i.description.replace(/ \(.+\)/g,"");return i.description.length<60&&!/\d\d/.test(e)?i.description.replace(/ \(.+\)/g,""):i.instance_of.includes("human")&&null!==i.occupations?i.occupations[0]:i.instance_of[0]}),[i]);return(0,a.jsx)(_._l,{draggableId:i.id,index:n,isDragDisabled:!t,children:function(e,t){return(0,a.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}({className:O()(S().itemCard,(I={},C(I,S().played,"played"in i),C(I,S().flipped,l),C(I,S().dragging,t.isDragging),I)),ref:e.innerRef},e.draggableProps,e.dragHandleProps,{onClick:function(){"played"in i&&c&&c(l?null:i.id)},children:[(0,a.jsxs)(k.animated.div,{className:S().front,style:{opacity:d.opacity.to((function(e){return 1-e})),transform:d.transform},children:[(0,a.jsxs)("div",{className:S().top,children:[(0,a.jsx)("div",{className:S().label,children:L(i.label)}),(0,a.jsx)("div",{className:S().description,children:L(u)})]}),(0,a.jsx)("div",{className:S().image,style:{backgroundImage:'url("'.concat(s(i.image),'")')}}),(0,a.jsx)(k.animated.div,{className:O()(S().bottom,(A={},C(A,S().correct,"played"in i&&i.played.correct),C(A,S().incorrect,"played"in i&&!i.played.correct),A)),children:(0,a.jsx)("span",{children:"played"in i?i.year<-1e4?i.year.toLocaleString():i.year.toString():E[i.date_prop_id]})})]}),(0,a.jsxs)(k.animated.div,{className:S().back,style:{opacity:d.opacity,transform:d.transform.to((function(e){return"".concat(e," rotateX(180deg) rotateZ(180deg)")}))},children:[(0,a.jsx)("span",{className:S().label,children:L(i.label)}),(0,a.jsxs)("span",{className:S().date,children:[L(E[i.date_prop_id]),": ",i.year]}),(0,a.jsxs)("span",{className:S().description,children:[i.description,"."]}),(0,a.jsx)("a",{href:"https://www.wikipedia.org/wiki/".concat(encodeURIComponent(i.wikipedia_title)),className:S().wikipedia,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()},children:"Wikipedia"})]})]}))}})}var W=r(549),F=r.n(W);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){M(e,t,r[t])}))}return e}function J(e){var t=e.next;return(0,a.jsx)("div",{className:F().container,children:(0,a.jsx)(_.bK,{droppableId:"next",direction:"horizontal",children:function(e){return(0,a.jsx)("div",{className:F().wrapper,children:(0,a.jsxs)("div",B({ref:e.innerRef},e.droppableProps,{className:F().list,children:[t&&(0,a.jsx)(D,{draggable:!0,index:0,item:t},t.id),e.placeholder]}))})}})})}var T=r(6495),G=r.n(T);function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){i=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q(e){var t=e.badlyPlacedIndex,r=e.isDragging,n=e.items,i=Y(o.useState(null),2),c=i[0],l=i[1];return o.useEffect((function(){r&&null!==c&&l(null)}),[c,r]),(0,a.jsx)("div",{className:G().wrapper,children:(0,a.jsx)("div",{className:G().listContainer,children:(0,a.jsx)(_.bK,{droppableId:"played",direction:"horizontal",children:function(e){return(0,a.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}({ref:e.innerRef},e.droppableProps,{className:G().list,children:[(0,a.jsx)("div",{className:G().timelineContainer,children:(0,a.jsx)("div",{className:G().timeline})}),(0,a.jsx)("div",{className:G().items,children:n.map((function(e,r){return(0,a.jsx)(D,{draggable:null!==t,flippedId:c,index:r,item:e,setFlippedId:l},e.id)}))}),e.placeholder]}))}})})})}var U=r(7052),Z=r.n(U),K=r(6814),X=r.n(K),H=r(4362),z=r.n(H);function Q(e){var t=e.onClick,r=e.text;return(0,a.jsx)("button",{onClick:t,className:z().button,children:r})}var V=r(8586),$=r.n(V);function ee(e){var t=e.score,r=e.title,n="#ffffff";return t>=20?n="#FFC940":t>=10?n="#A7B6C2":t>=1&&(n="#C99765"),(0,a.jsxs)("div",{className:$().score,style:{backgroundColor:n},children:[(0,a.jsx)("div",{className:$().title,children:r}),(0,a.jsx)("div",{className:$().value,children:t})]})}function te(e){var t=e.resetGame,r=e.score,n=(0,k.useSpring)({opacity:1,from:{opacity:0},config:{duration:500}});return(0,a.jsxs)(k.animated.div,{style:n,className:X().gameOver,children:[(0,a.jsx)("div",{className:X().scoresWrapper,children:(0,a.jsx)("div",{className:X().score,children:(0,a.jsx)(ee,{score:r,title:10===r?"You won!":"Score"})})}),(0,a.jsx)(Q,{onClick:t,text:"Play again!"})]})}function re(e,t,r,n,i,a,o){try{var c=e[a](o),l=c.value}catch(s){return void r(s)}c.done?t(l):Promise.resolve(l).then(n,i)}function ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){re(a,n,i,o,c,"next",e)}function c(e){re(a,n,i,o,c,"throw",e)}o(void 0)}))}}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ie(e,t,r[t])}))}return e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){i=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ce(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function le(e){var t=e.resetGame,r=e.state,n=e.setState,c=oe(o.useState(!1),2),l=c[0],s=c[1];function d(){return(d=ne(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=ne(i().mark((function e(t){var a,o,c,l,d,u,f,p,h,v,g,_;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:var i;if(s(!1),a=(i=t).source,(o=i.destination)&&null!==r.next&&("next"!==a.droppableId||"next"!==o.droppableId)){e.next=4;break}return e.abrupt("return");case 4:var x;if(c=ae({},r.next),"next"===a.droppableId&&"played"===o.droppableId)l=ce(r.deck),d=ce(r.played),u=r.nextButOne,f=m(l,d),p=[b(f.image)],x=y(d,c,o.index),h=x.correct,v=x.delta,d.splice(o.index,0,ae({},r.next,{played:{correct:h}})),n(ae({},r,{deck:l,imageCache:p,next:u,nextButOne:f,played:d,lives:h?r.lives:r.lives-1,badlyPlaced:h?null:{index:o.index,rendered:!1,delta:v}}));else if("played"===a.droppableId&&"played"===o.droppableId){var w;w=(g=ce(r.played)).splice(a.index,1),_=w[0],g.splice(o.index,0,_),n(ae({},r,{played:g,badlyPlaced:null}))}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.useLayoutEffect((function(){r.badlyPlaced&&null!==r.badlyPlaced.index&&!r.badlyPlaced.rendered&&n(ae({},r,{badlyPlaced:ae({},r.badlyPlaced,{rendered:!0})}))}),[n,r]);var f=o.useMemo((function(){return r.played.filter((function(e){return e.played.correct})).length-1}),[r.played]);return(0,a.jsx)(_.Z5,{onDragEnd:function(e){return u.apply(this,arguments)},onDragStart:function(){return d.apply(this,arguments)},sensors:[j.bind(null,r)],children:(0,a.jsxs)("div",{className:Z().wrapper,children:[(0,a.jsx)("div",{className:Z().top,children:r.lives>0&&f<10?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(J,{next:r.next})}):(0,a.jsx)(te,{resetGame:t,score:f})}),(0,a.jsx)("div",{id:"bottom",className:Z().bottom,children:(0,a.jsx)(q,{badlyPlacedIndex:null===r.badlyPlaced?null:r.badlyPlaced.index,isDragging:l,items:r.played})})]})})}var se=r(1607),de=r(3025),ue=r.n(de);function fe(){return(0,a.jsxs)("div",{className:ue().loading,children:[(0,a.jsx)("h1",{children:"Loading"}),(0,a.jsx)(se.Z,{type:"Oval",color:"#006699",height:60,width:60})]})}var pe=r(9674),me=r.n(pe);function ye(e){var t=e.start;return(0,a.jsx)("div",{className:me().instructions,children:(0,a.jsxs)("div",{className:me().wrapper,children:[(0,a.jsx)("h2",{children:"Place the cards on the timeline in the correct order."}),(0,a.jsx)("h2",{children:"Get 10 correct to win."}),(0,a.jsx)(Q,{onClick:t,text:"Start game!"}),(0,a.jsxs)("div",{className:me().about,children:[(0,a.jsxs)("div",{children:["A forked version of"," ",(0,a.jsx)("a",{href:"https://github.com/tom-james-watson/wikitrivia/",target:"_blank",rel:"noopener noreferrer",children:"Wikitrivia by Tom James Watson"}),"."]}),(0,a.jsxs)("div",{children:["All data sourced from"," ",(0,a.jsx)("a",{href:"https://www.wikidata.org",target:"_blank",rel:"noopener noreferrer",children:"Wikidata"})," ","and"," ",(0,a.jsx)("a",{href:"https://www.wikipedia.org",target:"_blank",rel:"noopener noreferrer",children:"Wikipedia"}),"."]})]})]})})}function be(e,t,r,n,i,a,o){try{var c=e[a](o),l=c.value}catch(s){return void r(s)}c.done?t(l):Promise.resolve(l).then(n,i)}function he(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){be(a,n,i,o,c,"next",e)}function c(e){be(a,n,i,o,c,"throw",e)}o(void 0)}))}}function ve(){var e=(0,o.useState)(null),t=e[0],r=e[1],n=(0,o.useState)(!1),c=n[0],s=n[1],d=(0,o.useState)(!1),u=d[0],f=d[1],p=(0,o.useState)(null),m=p[0],y=p[1];o.useEffect((function(){he(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("https://wikitrivia-data.tomjwatson.com/items.json");case 2:t=e.sent,r=t.data.trim().split("\n").map((function(e){return JSON.parse(e)})).filter((function(e){return!e.label.includes(String(e.year))})),y(r);case 5:case"end":return e.stop()}}),e)})))()}),[]),o.useEffect((function(){he(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===m){e.next=7;break}return e.t0=r,e.next=4,g(m);case 4:e.t1=e.sent,(0,e.t0)(e.t1),s(!0);case 7:case"end":return e.stop()}}),e)})))()}),[m]);var b=o.useCallback((function(){he(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===m){e.next=6;break}return e.t0=r,e.next=4,g(m);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))()}),[m]);return c&&null!==t?u?(0,a.jsx)(le,{state:t,setState:r,resetGame:b}):(0,a.jsx)(ye,{start:function(){return f(!0)}}):(0,a.jsx)(fe,{})}},7052:function(e){e.exports={wrapper:"board_wrapper__2Jo3Y",top:"board_top__3ygTE",bottom:"board_bottom__Vh-0o"}},4362:function(e){e.exports={button:"button_button__23c-B"}},6814:function(e){e.exports={gameOver:"game-over_gameOver__2FDNi",scoresWrapper:"game-over_scoresWrapper__ZNu3p",score:"game-over_score__X9g9h"}},9674:function(e){e.exports={instructions:"instructions_instructions__1cu4s",wrapper:"instructions_wrapper__qX4iF",about:"instructions_about__2GUZQ"}},337:function(e){e.exports={itemCard:"item-card_itemCard__dCw1A",front:"item-card_front__3I6YL",back:"item-card_back__1bHjt",dragging:"item-card_dragging__4gAkD",played:"item-card_played__1jF6P",flipped:"item-card_flipped__1-pwX",top:"item-card_top__YRpb-",image:"item-card_image__2cewM",bottom:"item-card_bottom__1Oqh8",correct:"item-card_correct__1BYpN",incorrect:"item-card_incorrect__15ahj",description:"item-card_description__2r48O",wikipedia:"item-card_wikipedia__3oiL7",date:"item-card_date__2JtyT",label:"item-card_label__vSjQH"}},3025:function(e){e.exports={loading:"loading_loading__2VABq"}},549:function(e){e.exports={container:"next-item-list_container__dFdwf",wrapper:"next-item-list_wrapper__aJdKp",list:"next-item-list_list__3cYbs"}},6495:function(e){e.exports={wrapper:"played-item-list_wrapper__2b-Jl",listContainer:"played-item-list_listContainer__1r0oU",timelineContainer:"played-item-list_timelineContainer__2_IUJ",timeline:"played-item-list_timeline__2ocbn",list:"played-item-list_list__2c1MJ",items:"played-item-list_items__3g9j6"}},8586:function(e){e.exports={score:"score_score__2wIec",title:"score_title__oZDna",value:"score_value__31kKg"}}}]);